<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="favicon.ico" />

    <title>Feedback</title>

    <!-- Bootstrap core CSS -->
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap theme -->
    <link href="lib/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" />
    <!-- Angular CSP-->
    <link href="lib/angular/css/angular-csp.css" rel="stylesheet" />

    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="lib/html5shiv/html5shiv.min.js"></script>
      <script src="lib/respond/respond.min.js"></script>
    <![endif]-->

    <!-- require -->
    <script src="lib/require/require.js"></script>

    <!-- angularjs -->
    <link href="lib/angular/css/angular-csp.css" rel="stylesheet" />
    <script src="lib/angular/js/angular.js"></script>
    <script src="lib/angular/js/angular-animate.js"></script>
    <script src="lib/angular/js/angular-resource.js"></script>
    <script src="lib/angular/js/angular-ui-router.js"></script>
    <script src="lib/angular/js/angular-ui-bootstrap-tpls.js"></script>

    <!-- your app's js -->
    <script src="js/app.js"></script>
    <script src="js/nav-controller.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/services.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/highcharts-more.js"></script>
	
	<script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
  </head>
<body>

	<div id="1" style="width: 300px; height: 200px;"></div>
	<div id="2" style="width: 300px; height: 200px;"></div>
	<div id="3" style="width: 300px; height: 200px;"></div>
	<div id="4" style="width: 300px; height: 200px;"></div>
	<div id="5" style="width: 300px; height: 200px;"></div>
	<div id="6" style="width: 300px; height: 200px;"></div>
	<div id="7" style="width: 300px; height: 200px;"></div>
	<div id="8" style="width: 300px; height: 200px;"></div>
<script>
	var gaugeOptions = {

		    chart: {
		        type: 'solidgauge'
		    },

		    title: null,

		    pane: {
		        center: ['50%', '85%'],
		        size: '140%',
		        startAngle: -90,
		        endAngle: 90,
		        background: {
		            backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
		            innerRadius: '60%',
		            outerRadius: '100%',
		            shape: 'arc'
		        }
		    },

		    tooltip: {
		        enabled: false
		    },

		    // the value axis
		    yAxis: {
		        stops: [
		            [0.1, '#DF5353'], // green
		            [0.5, '#DDDF0D'], // yellow
		            [0.9, '#55BF3B'] // red
		        ],
		        lineWidth: 0,
		        minorTickInterval: null,
		        tickAmount: 2,
		        title: {
		            y: -70
		        },
		        labels: {
		            y: 16
		        }
		    },

		    plotOptions: {
		        solidgauge: {
		            dataLabels: {
		                y: 5,
		                borderWidth: 0,
		                useHTML: true
		            }
		        }
		    }
		};

    var xhttp = new XMLHttpRequest();
    xhttp.open("GET", "/employee/lastReview?username=dburlacu", false);
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send();
    var response = JSON.parse(xhttp.responseText);
    
    for (var i = 0; i < response.ratings.length; i++){
        var obj = response.ratings[i];
        var chartRpm = Highcharts.chart(String(obj.category.id), Highcharts.merge(gaugeOptions, {
    	    yAxis: {
    	        min: 0,
    	        max: 10,
    	        title: {
    	            text: obj.category.name
    	        }
    	    },

    	    series: [{
    	        name: obj.category.name,
    	        data: [obj.score],
    	        dataLabels: {
    	            format: '<div style="text-align:center"><span style="font-size:25px;color:' +
    	                ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y:.1f}</span><br/>'+'</div>'
    	        },
    	        tooltip: {
    	            valueSuffix: ' score'
    	        }
    	    }]

    	}));
    }
  	</script>
</body>
</html>